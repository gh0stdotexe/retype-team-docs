Zabbix monitoring is a popular tool for monitoring server health, and you can integrate it with your Cosmos Nodes using these instructions, configurations, and templates. These configurations are based on Ubuntu 20.04, but should work on most Linux distributions.

Requirements:

- API and RPC exposed for localhost. Calls will be made to these services from `zabbix-agent2`. Refer to the `zab.userparameters.cosmos.conf` file for info on what calls are made to the API and RPC.

## Installation

1. Download and run the installation script:

```shell
#!/bin/bash

LOG_DIR="/home/whispernode/logs"
LOG_FILE="$LOG_DIR/zabbix-install.log"

# Create the logs directory if it doesn't exist
if [ ! -d "$LOG_DIR" ]; then
    mkdir -p "$LOG_DIR"
fi

# Redirect stdout and stderr to both console and log file
exec &> >(tee -a "$LOG_FILE")

# Add timestamps to log entries
echo "Log started: $(date)"

# Install Zabbix agent and configure it
wget https://repo.zabbix.com/zabbix/5.4/ubuntu/pool/main/z/zabbix-release/zabbix-release_5.4-1+ubuntu20.04_all.deb
dpkg -i zabbix-release_5.4-1+ubuntu20.04_all.deb
apt update
apt install zabbix-agent2 -y
SERVER=64.227.102.155
sed -i "s/Server=127.0.0.1/Server=$SERVER/g" /etc/zabbix/zabbix_agent2.conf
curl -o /etc/zabbix/zabbix_agent2.d/zab.userparameters.cosmos.conf https://raw.githubusercontent.com/gh0stdotexe/cosmozab/main/zabbix_agent2.d/zab.userparameters.cosmos.conf
ufw allow from $SERVER to any port 10050
systemctl daemon-reload
systemctl enable zabbix-agent2
systemctl restart zabbix-agent2

# Add timestamp to end of log
echo "Log ended: $(date)"
```

2. The script will install Zabbix version 5.4 repository and `zabbix-agent2` with apt.
3. The script will then prompt you for the IP address or hostname of your Zabbix server. This will be used to set the **`Server`** variable in the `zabbix_agent2.conf`file.
4. The script will install the necessary configuration files in`/etc/zabbix/zabbix_agent2.d/zab.userparameters.cosmos.conf` defines user parameters for monitoring Cosmos nodes.

<!---->

5. The script will update UFW to allow incoming traffic from your Zabbix server on port 10050.
6. The script will enable and restart zabbix-agent2, and you can monitor its logs using **`journalctl -fu zabbix-agent2`**.

That's it! You should now be able to monitor your Cosmos Nodes using Zabbix.&#x20;
